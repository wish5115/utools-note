<template>
  <div class="title">
    <van-nav-bar :title="time">
      <template #left>
        <van-icon @click="handleList()" name="wap-nav" size="2rem" color="#2c3e50"/>
        <h2 @click="handleList()">笔记</h2>
      </template>
      <template #right class="title-right-bar">
        <a @click="saveData()" lass="title-icon" title="保存笔记（Ctrl+S）">
          <svg
            t="1592729878266"
            fill="#2c3e50"
            class="icon"
            viewBox="0 0 1272 900"
            version="1.1"
            xmlns="http://www.w3.org/2000/svg"
            p-id="1978"
            width="35"
            height="50"
          >
            <path
              d="M840.551896 953.357365H129.988813c-1.59105-0.63642-3.182101-1.27284-4.932256-1.591051-41.208204-7.318832-96.258546-54.891237-110.259789-94.349285-2.386576-6.682411-3.659416-14.001243-5.409571-21.001864V123.147296c0.63642-1.59105 1.431945-3.182101 1.750155-4.932256C19.569919 72.870106 74.302051 16.865134 118.374145 4.932256c3.818521-0.95463 7.796147-1.90926 11.773773-2.863891h632.442511c-46.935985-10.341827 159.900559 16.865134 200.472343 199.199503v635.147297c-0.63642 1.59105-1.27284 3.182101-1.59105 4.932256-8.432567 45.344935-65.073959 97.372281-109.146054 109.305158-3.977626 0.95463-7.955252 1.90926-11.773772 2.704786zM485.270354 831.323804h311.209447c25.934121 0 39.617154-13.683033 39.617154-39.458049V547.162213c0-25.775016-13.842138-39.776259-39.298944-39.776259H173.583592c-25.138595 0-39.139838 14.001243-39.139838 38.980733v245.658173c0 4.136731 0.159105 8.273462 0.95463 12.251088 4.136731 17.819764 17.501554 27.047856 38.662523 27.047856 101.827222 0.159105 209.54133 0 311.209447 0z m-17.501554-447.085146h199.835923c27.843381 0 41.367309-13.523928 41.367309-41.367309v-173.424488c0-28.161591-13.205718-41.367309-41.208204-41.367308h-429.583592c-27.525171 0-40.889994 13.364823-40.889994 40.730888V343.030454c0 27.366066 13.523928 41.049099 40.889994 41.049099 72.551896 0.159105 157.036669 0.159105 229.588564 0.159105z m49.640771-194.744562h125.056557v129.034182h-125.056557V189.494096z m0 0"
              p-id="1979"
            />
          </svg>
        </a>
        <a class="title-icon" @click="handleAdd()" title="添加笔记（Ctrl+N）">
          <van-icon name="plus" color="#2c3e50" />
        </a>
        <a
          style="padding:0 1rem;"
          @click="open('https://github.com/wish5115/utools-note')"
          title="Github"
        >
          <svg
            version="1.1"
            id="Layer_1"
            xmlns="http://www.w3.org/2000/svg"
            xmlns:xlink="http://www.w3.org/1999/xlink"
            x="0px"
            y="0px"
            viewBox="0 0 36 36"
            enable-background="new 0 0 36 36"
            xml:space="preserve"
            class="mdui-icon"
            style="width: 30px;height:30px;"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              fill="#2c3e50"
              d="M18,1.4C9,1.4,1.7,8.7,1.7,17.7c0,7.2,4.7,13.3,11.1,15.5
	c0.8,0.1,1.1-0.4,1.1-0.8c0-0.4,0-1.4,0-2.8c-4.5,1-5.5-2.2-5.5-2.2c-0.7-1.9-1.8-2.4-1.8-2.4c-1.5-1,0.1-1,0.1-1
	c1.6,0.1,2.5,1.7,2.5,1.7c1.5,2.5,3.8,1.8,4.7,1.4c0.1-1.1,0.6-1.8,1-2.2c-3.6-0.4-7.4-1.8-7.4-8.1c0-1.8,0.6-3.2,1.7-4.4
	c-0.2-0.4-0.7-2.1,0.2-4.3c0,0,1.4-0.4,4.5,1.7c1.3-0.4,2.7-0.5,4.1-0.5c1.4,0,2.8,0.2,4.1,0.5c3.1-2.1,4.5-1.7,4.5-1.7
	c0.9,2.2,0.3,3.9,0.2,4.3c1,1.1,1.7,2.6,1.7,4.4c0,6.3-3.8,7.6-7.4,8c0.6,0.5,1.1,1.5,1.1,3c0,2.2,0,3.9,0,4.5
	c0,0.4,0.3,0.9,1.1,0.8c6.5-2.2,11.1-8.3,11.1-15.5C34.3,8.7,27,1.4,18,1.4z"
            />
          </svg>
        </a>
        <a
          class="title-icon"
          @click="open('https://github.com/wish5115/utools-note/issues')"
          title="反馈"
        >
          <van-icon name="chat" color="#2c3e50" />
        </a>
        <a
          class="title-icon"
          @click="exportText()"
          title="导出"
          style="font-size:29px;"
        >
          <svg width="25" height="25" style="font-size:29px;" t="1630121004105" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2833"><path d="M935.936055 472.831704a55.359965 55.359965 0 0 0-55.295965 55.359966 385.471759 385.471759 0 0 1-385.02376 385.151759A385.471759 385.471759 0 0 1 110.720571 528.19167a385.471759 385.471759 0 0 1 384.959759-385.151759 55.359965 55.359965 0 0 0 0-110.719931 493.823691 493.823691 0 0 0-350.463781 145.279909A494.399691 494.399691 0 0 0 0.00064 528.12767a494.399691 494.399691 0 0 0 145.279909 350.655781A494.207691 494.207691 0 0 0 495.74433 1023.99936a493.823691 493.823691 0 0 0 350.463781-145.215909 494.399691 494.399691 0 0 0 145.151909-350.591781 55.423965 55.423965 0 0 0-55.423965-55.359966zM1024 132.607917v-1.279999c0-0.512 0-0.959999-0.128-1.279999l-0.064-1.407999-0.128-1.152-0.256-1.599999-0.064-1.023999-0.383999-1.791999-0.192-0.895999c-0.128-0.512-0.192-1.215999-0.448-1.727999l-0.192-0.896c-0.128-0.576-0.384-1.087999-0.448-1.791999l-0.319999-0.959999-0.64-1.599999c0-0.384-0.256-0.831999-0.384-1.279999l-0.447999-1.279999a25.343984 25.343984 0 0 0-1.088-2.559999c-0.448-0.831999-0.768-1.599999-1.279999-2.367998l-0.64-1.088-0.639999-1.279999-0.896-1.407999-0.511999-0.895999-1.024-1.408-0.575999-0.767999-1.088-1.471999-0.575999-0.64-1.088-1.279999a4.799997 4.799997 0 0 1-0.639999-0.831999l-1.151999-1.28-0.768-0.703999-1.087999-1.024c-0.32-0.32-0.64-0.512-0.896-0.895999l-0.959999-0.831999-1.151999-1.024-0.832-0.639999-1.279999-1.024a3.391998 3.391998 0 0 0-0.768-0.575999l-1.407999-0.96c-0.192-0.256-0.576-0.32-0.767999-0.575999l-1.535999-0.96-0.768-0.448-1.599999-0.895999a3.903998 3.903998 0 0 0-0.959999-0.448c-0.448-0.192-1.023999-0.448-1.471999-0.767999a6.783996 6.783996 0 0 0-1.279999-0.576l-1.28-0.512-2.367998-1.023999h-0.128L772.416157 3.391998a55.359965 55.359965 0 0 0-38.399976 103.743935l78.335951 28.543982c-63.167961 27.583983-125.247922 63.42396-178.879888 104.191935-51.583968 39.039976-94.079941 81.215949-126.015921 125.055922-37.247977 51.007968-59.647963 103.487935-66.559959 155.903902a55.295965 55.295965 0 1 0 109.631932 14.527991c8.959994-67.263958 62.143961-140.991912 149.759906-207.35987a782.207511 782.207511 0 0 1 174.335891-98.687938l-3.839997 10.559993 0.192 0.448-32.63998 89.727944a55.423965 55.423965 0 0 0 103.999935 37.887976l78.335951-215.295865v-0.128c0.32-0.768 0.576-1.663999 0.768-2.431999l0.319999-1.215999 0.384-1.279999 0.32-1.599999 0.192-0.96 0.32-1.791999 0.128-0.895999 0.255999-1.727999 0.064-0.895999c0.128-0.576 0.128-1.151999 0.128-1.663999 0-0.32 0-0.64 0.128-1.024 0-0.512 0-1.087999 0.128-1.663999v-1.087999C1024 133.631916 1024 133.119917 1024 132.607917z" p-id="2834"></path></svg>
          <!-- <img src="~@/assets/export.png" aligin="absmiddle" width="25" height="25" /> -->
        </a>
      </template>
    </van-nav-bar>
  </div>
</template>

<script>
export default {
  data() {
    return {
      time: this.$api.toLocaleString(new Date())
    }
  },
  mounted() {
    let self = this
    document.onkeydown = function (e) {
      var keyCode = e.keyCode || e.which || e.charCode
      var ctrlKey = e.ctrlKey || e.metaKey
      //console.log('keyCode', keyCode)
      if (ctrlKey && keyCode == 83) {
        self.saveData()
        return false
      } else if(ctrlKey && keyCode == 78) {
        self.handleAdd()
        return false
      }
    }
    setInterval(function() {
      self.time = self.$api.toLocaleString(new Date())
    }, 1000)
  },
  methods: {
    open(url) {
      window.openExternal(url)
    },
    saveData() {
      this.$emit('saveData')
    },
    handleAdd() {
      this.$emit('handleAdd')
    },
    handleList(){
      this.$emit('handleList')
    },
    exportText() {
      this.$emit('exportText')
    }
  }
}
</script>

<style scoped>
.title-icon {
  padding: 0 1rem;
  color: #000;
  font-size: 32px;
  height: 40px;
}
.title-right-bar{
  top: 2px;
}
</style>